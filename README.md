# Домашнее задание к занятию «Базы данных, их типы» - Дудин Сергей Васильевич

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

---

*Для этой задачи наиболее подходящей будет реляционная СУБД. Она хорошо обеспечивает целостность данных за счет механизмов блокировок при одновременном доступе и имеет жесткую схему таблиц. Строгая типизация и контроль целостности очень важен для финансовых данных, аналитические отчеты эффективно строятся на основе реляционных запросов. Прогнозирование рисков требует сложных вычислений на структурированных данных, а для бюджетирования нужна возможноть работы с транзакциями.*

---

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

---

*OpenSSL API, Argon2 API, BLAKE2 API, OpenMP API, CUDA API. Вариантов достаточно много, необходимо учитывать нюансы. Универсальным выбором обеспечивающим хорошую производительность станет OpenSSL API, так как оптимизирован под разные платформы, поддерживает аппаратное ускореник и высокую произаодительность.*

---

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

---

*Для лендингов хорошо подойдет NoSQL Document-orient СУДБ, такая как MongoDB или CouchDB. Лендинги как правило имеют простую структуру и требовательны к скорости загрузки страниц, поэтому использование таких СУДБ позвоит легко развернуть и обеспечить высокую производительность чтения баз данных
Для CRM обоснованнм будет гибридный подход с использованием нескольких типов СУДБ, например PostgreSQL для основной  информации, финансовых данных, истории взаимодействия. В то время как для дополнительных данных можно использовать NoSQL СУБД например Redis. Используя Redis для часто запрашиваемых данных мы можем снизить нагрузку на основную СУДБ*

---

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

---

*Эту задачу можно закрыть оной СУДБ. Оптимальной будет PostgreSQL с поддержкой JSON, что позволит использовать реляционные таблицы для хранения структурированных данных CRM  и хранить неструктурированные данные через JSONB для лендинга. Такой подход позволит создать единую систему, которая будет удовлетворять требованиям как к гибкости хранения данных лендингов, так и к структурированности и производительности CRM.*

---

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру. 

---

*Отличным выбором станет реляционная СУДБ с простым интерфейсом например SQLite или MySQL. Они широко распространены, просты в установке и имеют хорошую документацию.*

---

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

---

*Мождно. Оптимально PostgreSQL. Необходимо будет в существующей базе данных создать новую схему и использовать возможности интеграции, что бы использовать существующие таблицы отделов, добавить связи с CRM для отслеживания обучения, внедрить систему версионирования документов. Потребуется допонительная оптимизация в части производительности и безопастности, но в итоге позволит обеспечить целостность данных и упростит поддержку системы*

---

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

---

*Наилучшим выбором будет PostgreSQL с расширением PostGIS и поддержкой графовых данных. Эта связка позаолит эффективно работать со связями меджу обЪектами, строить сложные маршруты, расчитывать расстояния, работать с картами. Возможна интеграция с GPS-трекингом, системами навигации, CRM-системами.*

---

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

---

*Возможно, но нужно создать для отдела закупок отдельную схему в существующей СУДБ PostgreSQL, по примеру отдела контроля качества, что позволит использовать описанные выше преимущества интеграций и обеспечит целостность данных*

---

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

---

*Принимая во внимание все изложенное выше, все потребности сможет закрыть СУДБ PostgreSQL с дополнительными расширениями. Такой подход позволит создать единую, эффективную и масштабируемую систему, способную удовлетворить все требования различных отделов компании.*

---
---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

---

* Инициализация транзакции (BEGIN TRANSACTION)
   * Система создает новую транзакцию в журнале БД
   * Назначается уникальный идентификатор транзакции
   * Устанавливается временная метка начала операции
   * Блокируются необходимые записи в таблицах для предотвращения конфликтов

* Проверка баланса плательщика
   * Запрос текущего баланса счета плательщика
   * Проверка достаточности средств для операции
   * Валидация суммы пополнения на соответствие лимитам
   * Запись информации о проверке в журнал транзакций

* Обновление данных плательщика
   * Списание суммы пополнения со счета плательщика
   * Обновление таблицы транзакций
   * Создание записи об операции в журнале
   * Проверка успешности обновления данных

* Обработка данных получателя
   * Проверка существования номера телефона в БД
   * Обновление баланса абонента
   * Создание записи о пополнении в таблице операций
   * Проверка корректности внесенных изменений

* Фиксация изменений (COMMIT)
   * Проверка успешного выполнения всех операций
   * Запись транзакции в журнал БД
   * Снятие блокировок с записей
   * Обновление индексов и статистики

* Завершение транзакции
   * Генерация подтверждения успешной операции
   * Создание резервной копии изменений
   * Обновление кэша данных
   * Формирование отчета об успешном завершении транзакции
 *При возникновении ошибки на любом из этапов происходит автоматический откат (ROLLBACK) всех изменений, и база данных возвращается в исходное состояние.*

---

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Добавляется шаблон автопополнения с настройками номера телефона, суммой и способом пополнения, тригером для срабатывания автоплатежа. Весь процесс описанный выше повторится, но запушена транзакция будет не плательщиком, а сработкой тригерра (например снижением баланса н иже установленной суммы).*

---
---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

---

*1. Строгая схема данных и целостность
2. Мощный язык запросов
3. Зрелые инструменты и экосистема
4. Безопасность и контроль доступа
5. Простота масштабирования вертикально*

---

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

---

*1. Горизонтальное масштабирование
2. Сохранение ACID-гарантий
3. Совместимость с SQL
4. Высокая производительность
5. Гибкость архитектуры
6. Улучшенная обработка больших данных
7. Современные механизмы безопасности
8. Управление ресурсами*

---
---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

---

*При выборе СУБД для работы с большим объемом данных и интенсивными вычислениями следует учитывать следующие ключевые критерии:*
* *Производительность*
* *Масштабируемость*
* *Отказоустойчивость*
* *Распределенность*

*Для обработки данных на 1000 машин оптимально рассмотреть две модели:
MapReduce (Apache Hadoop, Apache Spark) - подходит для пакетной обработки больших объемов данных. Данные разбиваются на части и обрабатываются параллельно. Эффективна при отсутствии требований к мгновенному ответу.
Оптимальна для аналитических задач и сложных вычислений.*

*ACID-транзакции (MySQL Cluster, Oracle RAC, PostgreSQL) - обеспечивает целостность данных через ACID-консистентность. Поддерживает сложные операции с данными. Гарантирует соблюдение целостности при распределении нагрузки. Подходит для транзакционных систем*

*Для задачи с 1000 машин оптимальна модель MapReduce, так как позволяет эффективно использовать все доступные ресурсы и обеспечивает линейное масштабирование при добавлении новых узлов. Хорошо подходит для параллельной обработки данных.*

*В качестве СУБД можно использовать NewSQL системы или колоночные СУБД (например, ClickHouse, Cassandra), так как они обеспечивают высокую производительность при массовых вычислениях и поддерживают горизонтальное масштабирование. Оптимизированы для работы с большими объемами данных, а так же имеют встроенные механизмы распределенной обработки.*

---
---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
